name: ROBLOX 2016 stylusthemecss

on:
  push:
    paths:
      - stylustheme.css
  schedule:
    - cron: "0 */5 * * *"

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Add header to stylustheme.css
      run: |
        CUR_DATE=$(date +%m-%d)
        echo "/* ==UserStyle==
        @name           ROBLOX 2016 dev$CUR_DATE
        @namespace      Userstyle
        @author         anthony1x6000
        @description    Userstyle that changes the look of ROBLOX to be more faithful to what it would look like in 2016.
        @version        p$CUR_DATE
        @license        MIT License
        ==/UserStyle== */" > header.txt
        cat header.txt stylustheme.css > roblox2016-pre$CUR_DATE.user.css

    - name: Create downloads branch
      run: |
        git branch downloads
        git checkout downloads

    - name: Create file
      run: |
        echo "ROBLOX 2016 dev file" > roblox2016-pre$CUR_DATE.user.css

    - name: Set user identity
      run: |
        git config --global user.email "contact.b7hkd@simplelogin.fr"
        git config --global user.name "anthony1x6000"

    - name: Commit changes
      run: |
        git add roblox2016-pre$CUR_DATE.user.css
        git commit -m "Add roblox2016-pre$CUR_DATE.user.css"

    - name: Push to GitHub
      uses: ad-m/github-push-action@master
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        branch: downloads
        force: true
